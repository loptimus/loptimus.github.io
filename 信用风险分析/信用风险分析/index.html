<!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2"><link rel="stylesheet" href="/css/main.css?v=7.1.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.0"><link rel="mask-icon" href="/images/logo.svg?v=7.1.0" color="#222"><script id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"7.1.0",sidebar:{position:"left",display:"post",offset:12,onmobile:!1,dimmer:!1},back2top:!0,back2top_sidebar:!1,fancybox:!1,fastclick:!1,lazyload:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="信用风险分析 本文的信用风险是指由于借款人无法按时偿还而拖欠已经发生债务的违约风险。由于贷款人同时遭受了本金和利息的损失，所以这一风险由贷款人承担。因此，贷款人在向借款人发放贷款时需要对借款人的信用风险进行分析和预测评估。 本文根据从kaggle平台获取信用风险数据，主要对该数据中的借款人的信用风险与借款人的相关信息进行分析。找出可能影响信用风险的相关因素。"><meta name="keywords" content="R语言"><meta property="og:type" content="article"><meta property="og:title" content="信用风险分析"><meta property="og:url" content="http://yoursite.com/信用风险分析/信用风险分析/index.html"><meta property="og:site_name" content="QuickNotes"><meta property="og:description" content="信用风险分析 本文的信用风险是指由于借款人无法按时偿还而拖欠已经发生债务的违约风险。由于贷款人同时遭受了本金和利息的损失，所以这一风险由贷款人承担。因此，贷款人在向借款人发放贷款时需要对借款人的信用风险进行分析和预测评估。 本文根据从kaggle平台获取信用风险数据，主要对该数据中的借款人的信用风险与借款人的相关信息进行分析。找出可能影响信用风险的相关因素。"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/risk_desc.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/age_desc.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/age_risk.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/age_boxplot.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/sex_desc.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/sex_risk.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/job_desc.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/job_risk.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/housing_desc.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/housing_risk.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/saving_accounts_desc.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/saving_accounts_risk.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/checking_account_desc.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/checking_account_risk.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/credit_amount_desc.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/credit_amount_risk.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/credit_amount_boxplot.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/duration_desc.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/duration_risk.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/duration_boxplot.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/purpose_desc.jpg"><meta property="og:image" content="http://yoursite.com/信用风险分析/信用风险分析/purpose_risk.jpg"><meta property="og:updated_time" content="2019-08-02T06:15:59.524Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="信用风险分析"><meta name="twitter:description" content="信用风险分析 本文的信用风险是指由于借款人无法按时偿还而拖欠已经发生债务的违约风险。由于贷款人同时遭受了本金和利息的损失，所以这一风险由贷款人承担。因此，贷款人在向借款人发放贷款时需要对借款人的信用风险进行分析和预测评估。 本文根据从kaggle平台获取信用风险数据，主要对该数据中的借款人的信用风险与借款人的相关信息进行分析。找出可能影响信用风险的相关因素。"><meta name="twitter:image" content="http://yoursite.com/信用风险分析/信用风险分析/risk_desc.jpg"><link rel="canonical" href="http://yoursite.com/信用风险分析/信用风险分析/"><script id="page.configurations">CONFIG.page={sidebar:""}</script><title>信用风险分析 | QuickNotes</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">QuickNotes</span><span class="logo-line-after"><i></i></span></a></div></div><div class="site-nav-toggle"> <button aria-label="切换导航栏"><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="menu-item-icon fa fa-fw fa-heartbeat"></i><br>公益 404</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"> <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header> <a href="https://github.com/loptimus" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yoursite.com/信用风险分析/信用风险分析/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="lwl"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="QuickNotes"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">信用风险分析</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-02-26 18:00:00" itemprop="dateCreated datePublished" datetime="2019-02-26T18:00:00+08:00">2019-02-26</time> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2019-08-02 14:15:59" itemprop="dateModified" datetime="2019-08-02T14:15:59+08:00">2019-08-02</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/信用风险分析/" itemprop="url" rel="index"><span itemprop="name">信用风险分析</span></a></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i> 阅读次数：<span class="busuanzi-value" id="busuanzi_value_page_pv"></span></span><div class="post-symbolscount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span title="本文字数">26k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">24 分钟</span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="信用风险分析">信用风险分析</h1><p>本文的<strong>信用风险</strong>是指由于借款人无法按时偿还而拖欠已经发生债务的违约风险。由于贷款人同时遭受了本金和利息的损失，所以这一风险由贷款人承担。因此，贷款人在向借款人发放贷款时需要对借款人的信用风险进行分析和预测评估。</p><p>本文根据从kaggle平台获取信用风险数据，主要对该数据中的借款人的信用风险与借款人的相关信息进行分析。找出可能影响信用风险的相关因素。</p><a id="more"></a><h2 id="分析准备">分析准备</h2><h3 id="获取数据">获取数据</h3><p>数据来源：<a href="https://www.kaggle.com/kabure/german-credit-data-with-risk" target="_blank" rel="noopener">kaggle.com/kabure/german-credit-data-with-risk</a></p><p>从数据来源的链接中下载数据，将得到csv格式的数据文件，然后读入到R环境中。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读入数据</span></span><br><span class="line">credit.df &lt;- read.csv(</span><br><span class="line">  <span class="string">"german_credit_data.csv"</span>, header = <span class="literal">TRUE</span>, </span><br><span class="line">  sep = <span class="string">","</span>, stringsAsFactors = <span class="literal">FALSE</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>查看数据维度及其特征的详细信息</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str(credit.df)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'data.frame'</span>:	<span class="number">1000</span> obs. of  <span class="number">11</span> variables:</span><br><span class="line"> $ X               : int  <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span> <span class="number">9</span> <span class="keyword">...</span></span><br><span class="line"> $ Age             : int  <span class="number">67</span> <span class="number">22</span> <span class="number">49</span> <span class="number">45</span> <span class="number">53</span> <span class="number">35</span> <span class="number">53</span> <span class="number">35</span> <span class="number">61</span> <span class="number">28</span> <span class="keyword">...</span></span><br><span class="line"> $ Sex             : chr  <span class="string">"male"</span> <span class="string">"female"</span> <span class="string">"male"</span> <span class="string">"male"</span> <span class="keyword">...</span></span><br><span class="line"> $ Job             : int  <span class="number">2</span> <span class="number">2</span> <span class="number">1</span> <span class="number">2</span> <span class="number">2</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">1</span> <span class="number">3</span> <span class="keyword">...</span></span><br><span class="line"> $ Housing         : chr  <span class="string">"own"</span> <span class="string">"own"</span> <span class="string">"own"</span> <span class="string">"free"</span> <span class="keyword">...</span></span><br><span class="line"> $ Saving.accounts : chr  <span class="literal">NA</span> <span class="string">"little"</span> <span class="string">"little"</span> <span class="string">"little"</span> <span class="keyword">...</span></span><br><span class="line"> $ Checking.account: chr  <span class="string">"little"</span> <span class="string">"moderate"</span> <span class="literal">NA</span> <span class="string">"little"</span> <span class="keyword">...</span></span><br><span class="line"> $ Credit.amount   : int  <span class="number">1169</span> <span class="number">5951</span> <span class="number">2096</span> <span class="number">7882</span> <span class="number">4870</span> <span class="number">9055</span> <span class="number">2835</span> <span class="number">6948</span> <span class="number">3059</span> <span class="number">5234</span> <span class="keyword">...</span></span><br><span class="line"> $ Duration        : int  <span class="number">6</span> <span class="number">48</span> <span class="number">12</span> <span class="number">42</span> <span class="number">24</span> <span class="number">36</span> <span class="number">24</span> <span class="number">36</span> <span class="number">12</span> <span class="number">30</span> <span class="keyword">...</span></span><br><span class="line"> $ Purpose         : chr  <span class="string">"radio/TV"</span> <span class="string">"radio/TV"</span> <span class="string">"education"</span> <span class="string">"furniture/equipment"</span> <span class="keyword">...</span></span><br><span class="line"> $ Risk            : chr  <span class="string">"good"</span> <span class="string">"bad"</span> <span class="string">"good"</span> <span class="string">"good"</span> <span class="keyword">...</span></span><br></pre></td></tr></table></figure><p>数据共包含1000条实例，每一条实例包含一名银行客户的11个信息特征。每个特征的含有名称、数据类型以及样本值等信息。</p><h3 id="数据特征含义">数据特征含义</h3><p>理解每个特征的含义：</p><p><strong>X</strong>：由于原始数据german_credit_data.csv文件的第一列是实例序号，当将文件读入R环境的data.frame类型时，data.frame会自动为其添加名称"X"，所以可以将其从数据集中删除。</p><p><strong>Age</strong>：数值类型，表示年龄。</p><p><strong>Sex</strong> ：文本类型，表示性别，"female"（女性），"male"（男性）。</p><p><strong>Job</strong> ：数值类型，表示客户当前工作情况，0表示"unskilled and non-resident"（没有职业技能且不是常住居民的人员）；1表示"unskilled and resident"（没有职业技能但为常住居民的人员）；2表示"skilled"（拥有职业技能工作的人员）； 3表示"highly skilled"（拥有高级职业技能工作的人员）。</p><p><strong>Housing</strong> ：文本类型，表示居住房子的所有权，"own"（自己拥有），"rent"（租住），"free"（免费居住）。</p><p><strong>Saving accounts</strong>：文本类型，表示储蓄账户存款，"little"（少或贫穷），"moderate"（中等或适当），"rich"（富有），"quite rich"（比较富有）。</p><p><strong>Checking account</strong>：文本类型，表示支票账户，"little"（少或贫穷），"moderate"（中等或适当），"rich"（富有）。</p><p><strong>Credit amount</strong>：数值类型，表示贷款金额，单位德国马克。</p><p><strong>Duration</strong>：数值类型，表示还款期限或贷款时间，单位月。</p><p><strong>Purpose</strong>：文本类型，表示贷款的目的，"car"（购车），"furniture/equipment"（购买家具），"radio/TV"（购买家电），"domestic appliances, repairs"（家庭用具维修），"education"（教育），"business"（商业），"vacation/others"（ 度假或其它）。</p><p><strong>Risk</strong> ：文本类型，表示信用风险的好坏，也是预测的目标值。因子水平：good（好）表示不会违约、bad（坏）违约。</p><h3 id="分析工具准备">分析工具准备</h3><ul><li>需要用到的R package</li></ul><table><thead><tr class="header"><th>package</th><th>描述</th></tr></thead><tbody><tr class="odd"><td>mice</td><td>处理缺失值</td></tr><tr class="even"><td>ggplot2</td><td>数据可视化</td></tr><tr class="odd"><td>gridExtra</td><td>图形网格布局</td></tr><tr class="even"><td>gmodels</td><td>建立列联表</td></tr><tr class="odd"><td>caret</td><td>分类和回归训练</td></tr></tbody></table><p>分析开始时，可先将所需要的package安装并加载到R环境中。</p><ul><li>分析所使用的自定义的工具函数</li></ul><p>本文所使用的所有自定义的工具函数都放在名为"analytics_utils.R"的文件中。分析开始时，可先将该文件加载到R环境中。假设文件"analytics_utils.R"在当前的工作环境目录下，可使用source函数加载该文件内容。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 加载analytics_utils.R</span></span><br><span class="line"><span class="keyword">source</span>(<span class="string">"analytics_utils.R"</span>)</span><br></pre></td></tr></table></figure><blockquote><p><a href="analytics_utils.R">analytics_utils.R</a></p></blockquote><h2 id="数据处理">数据处理</h2><p>删除第一列的实例序号数据，并查看前6行数据</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">credit.df$X &lt;- <span class="literal">NULL</span>  <span class="comment"># 删除第一列数据</span></span><br><span class="line">colnames(credit.df)  <span class="comment"># 查看列名</span></span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>] <span class="string">"Age"</span>              <span class="string">"Sex"</span>              <span class="string">"Job"</span>             </span><br><span class="line">[<span class="number">4</span>] <span class="string">"Housing"</span>          <span class="string">"Saving.accounts"</span>  <span class="string">"Checking.account"</span></span><br><span class="line">[<span class="number">7</span>] <span class="string">"Credit.amount"</span>    <span class="string">"Duration"</span>         <span class="string">"Purpose"</span>         </span><br><span class="line">[<span class="number">10</span>] <span class="string">"Risk"</span></span><br></pre></td></tr></table></figure><h3 id="数据转换">数据转换</h3><p>将Risk列中的"good"和"bad"，分别改成1和0</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">credit.df$Risk &lt;- ifelse(credit.df$Risk == <span class="string">"good"</span>, <span class="number">1</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>将文本类型特征及特征Job转换成因子类型</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">factor.vars &lt;- c(</span><br><span class="line">  <span class="string">"Risk"</span>, <span class="string">"Sex"</span>, <span class="string">"Job"</span>, <span class="string">"Housing"</span>, <span class="string">"Saving.accounts"</span>,</span><br><span class="line">  <span class="string">"Checking.account"</span>, <span class="string">"Purpose"</span></span><br><span class="line">)</span><br><span class="line">credit.df &lt;- to.factors(credit.df, factor.vars)</span><br><span class="line">str(credit.df)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'data.frame'</span>:	<span class="number">1000</span> obs. of  <span class="number">10</span> variables:</span><br><span class="line"> $ Age             : int  <span class="number">67</span> <span class="number">22</span> <span class="number">49</span> <span class="number">45</span> <span class="number">53</span> <span class="number">35</span> <span class="number">53</span> <span class="number">35</span> <span class="number">61</span> <span class="number">28</span> <span class="keyword">...</span></span><br><span class="line"> $ Sex             : Factor w/ <span class="number">2</span> levels <span class="string">"female"</span>,<span class="string">"male"</span>: <span class="number">2</span> <span class="number">1</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="keyword">...</span></span><br><span class="line"> $ Job             : Factor w/ <span class="number">4</span> levels <span class="string">"0"</span>,<span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>: <span class="number">3</span> <span class="number">3</span> <span class="number">2</span> <span class="number">3</span> <span class="number">3</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">2</span> <span class="number">4</span> <span class="keyword">...</span></span><br><span class="line"> $ Housing         : Factor w/ <span class="number">3</span> levels <span class="string">"free"</span>,<span class="string">"own"</span>,<span class="string">"rent"</span>: <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">2</span> <span class="number">2</span> <span class="keyword">...</span></span><br><span class="line"> $ Saving.accounts : Factor w/ <span class="number">4</span> levels <span class="string">"little"</span>,<span class="string">"moderate"</span>,..: <span class="literal">NA</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="literal">NA</span> <span class="number">3</span> <span class="number">1</span> <span class="number">4</span> <span class="number">1</span> <span class="keyword">...</span></span><br><span class="line"> $ Checking.account: Factor w/ <span class="number">3</span> levels <span class="string">"little"</span>,<span class="string">"moderate"</span>,..: <span class="number">1</span> <span class="number">2</span> <span class="literal">NA</span> <span class="number">1</span> <span class="number">1</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="number">2</span> <span class="literal">NA</span> <span class="number">2</span> <span class="keyword">...</span></span><br><span class="line"> $ Credit.amount   : int  <span class="number">1169</span> <span class="number">5951</span> <span class="number">2096</span> <span class="number">7882</span> <span class="number">4870</span> <span class="number">9055</span> <span class="number">2835</span> <span class="number">6948</span> <span class="number">3059</span> <span class="number">5234</span> <span class="keyword">...</span></span><br><span class="line"> $ Duration        : int  <span class="number">6</span> <span class="number">48</span> <span class="number">12</span> <span class="number">42</span> <span class="number">24</span> <span class="number">36</span> <span class="number">24</span> <span class="number">36</span> <span class="number">12</span> <span class="number">30</span> <span class="keyword">...</span></span><br><span class="line"> $ Purpose         : Factor w/ <span class="number">8</span> levels <span class="string">"business"</span>,<span class="string">"car"</span>,..: <span class="number">6</span> <span class="number">6</span> <span class="number">4</span> <span class="number">5</span> <span class="number">2</span> <span class="number">4</span> <span class="number">5</span> <span class="number">2</span> <span class="number">6</span> <span class="number">2</span> <span class="keyword">...</span></span><br><span class="line"> $ Risk            : Factor w/ <span class="number">2</span> levels <span class="string">"0"</span>,<span class="string">"1"</span>: <span class="number">2</span> <span class="number">1</span> <span class="number">2</span> <span class="number">2</span> <span class="number">1</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">1</span> <span class="keyword">...</span></span><br></pre></td></tr></table></figure><p>查看数据转换后的前3行数据</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head(credit.df, <span class="number">3</span>)</span><br></pre></td></tr></table></figure><table style="width:100%"><colgroup><col style="width:4%"><col style="width:4%"><col style="width:6%"><col style="width:4%"><col style="width:7%"><col style="width:16%"><col style="width:17%"><col style="width:14%"><col style="width:8%"><col style="width:10%"><col style="width:4%"></colgroup><thead><tr class="header"><th style="text-align:left"></th><th style="text-align:right">Age</th><th style="text-align:left">Sex</th><th style="text-align:left">Job</th><th style="text-align:left">Housing</th><th style="text-align:left">Saving.accounts</th><th style="text-align:left">Checking.account</th><th style="text-align:right">Credit.amount</th><th style="text-align:right">Duration</th><th style="text-align:left">Purpose</th><th style="text-align:left">Risk</th></tr></thead><tbody><tr class="odd"><td style="text-align:left">1</td><td style="text-align:right">67</td><td style="text-align:left">male</td><td style="text-align:left">2</td><td style="text-align:left">own</td><td style="text-align:left">NA</td><td style="text-align:left">little</td><td style="text-align:right">1169</td><td style="text-align:right">6</td><td style="text-align:left">radio/TV</td><td style="text-align:left">1</td></tr><tr class="even"><td style="text-align:left">2</td><td style="text-align:right">22</td><td style="text-align:left">female</td><td style="text-align:left">2</td><td style="text-align:left">own</td><td style="text-align:left">little</td><td style="text-align:left">moderate</td><td style="text-align:right">5951</td><td style="text-align:right">48</td><td style="text-align:left">radio/TV</td><td style="text-align:left">0</td></tr><tr class="odd"><td style="text-align:left">3</td><td style="text-align:right">49</td><td style="text-align:left">male</td><td style="text-align:left">1</td><td style="text-align:left">own</td><td style="text-align:left">little</td><td style="text-align:left">NA</td><td style="text-align:right">2096</td><td style="text-align:right">12</td><td style="text-align:left">education</td><td style="text-align:left">1</td></tr></tbody></table><p>可以看到数据中含有缺失值NA。</p><h3 id="缺失值处理">缺失值处理</h3><h4 id="识别缺失值">识别缺失值</h4><p>查看缺失值总数</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sum(is.na(credit.df))</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>] <span class="number">577</span></span><br></pre></td></tr></table></figure><p>数据集中共有577个缺失值。</p><p>查看含有缺失值的实例的总数</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(na.sum &lt;- nrow(credit.df) - sum(complete.cases(credit.df)))</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>] <span class="number">478</span></span><br></pre></td></tr></table></figure><p>可以看到，数据集中共有1000条实例，含有缺失值的实例占比高达47.8%。</p><p>使用mice包中的md.partten函数查看缺失值的分布形式</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">md.pattern(credit.df, plot = <span class="literal">T</span>)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">     Age Sex Job Housing Credit.amount Duration Purpose Risk Saving.accounts Checking.account    </span><br><span class="line">522   1   1   1       1             1        1       1    1               1                1   0</span><br><span class="line">295   1   1   1       1             1        1       1    1               1                0   1</span><br><span class="line">84    1   1   1       1             1        1       1    1               0                1   1</span><br><span class="line">99    1   1   1       1             1        1       1    1               0                0   2</span><br><span class="line">      0   0   0       0             0        0       0    0             183              394 577</span><br></pre></td></tr></table></figure><p>可以看到，缺失值主要集中在Saving.accounts和Checking.account两列。含有缺失值的实例共有3种模式：</p><ol type="1"><li>只在Checking.account列含有缺失值的实例，共有295条。</li><li>只在Saving.accounts列含有缺失值的实例，共有84条。</li><li>同时在Checking.account和Saving.accounts两列都有缺失值的实例，共99条。</li></ol><p>所以295 + 84 + 99 = 478与上面计算的含有缺失值的实例的总数一致。</p><h4 id="多重插补填补缺失值">多重插补填补缺失值</h4><p>使用分类回归树算法"cart"对缺失值进行插补。因为多重插补是使用变量间已知的信息预测缺失的信息，而建模的目的是用自变量预测因变量。如果加入了因变量y进行预测，则相当于首先用因变量y预测缺失值的自变量x，然后在建模时使用填补结果x预测因变量y，由此极易造成误导，所以将Risk列剔除后再进行插补。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 参数m表示插补次数</span></span><br><span class="line">imp &lt;- mice(credit.df[, -<span class="number">10</span>], method = <span class="string">"cart"</span>, m = <span class="number">1</span>)</span><br><span class="line"><span class="comment"># 查看插补信息</span></span><br><span class="line">summary(imp)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Class: mids</span><br><span class="line">Number of multiple imputations:  <span class="number">1</span> </span><br><span class="line">Imputation methods:</span><br><span class="line">             Age              Sex              Job          Housing </span><br><span class="line">              <span class="string">""</span>               <span class="string">""</span>               <span class="string">""</span>               <span class="string">""</span> </span><br><span class="line"> Saving.accounts Checking.account    Credit.amount         Duration </span><br><span class="line">          <span class="string">"cart"</span>           <span class="string">"cart"</span>               <span class="string">""</span>               <span class="string">""</span> </span><br><span class="line">         Purpose </span><br><span class="line">              <span class="string">""</span> </span><br><span class="line">PredictorMatrix:</span><br><span class="line">                 Age Sex Job Housing Saving.accounts Checking.account</span><br><span class="line">Age                <span class="number">0</span>   <span class="number">1</span>   <span class="number">1</span>       <span class="number">1</span>               <span class="number">1</span>                <span class="number">1</span></span><br><span class="line">Sex                <span class="number">1</span>   <span class="number">0</span>   <span class="number">1</span>       <span class="number">1</span>               <span class="number">1</span>                <span class="number">1</span></span><br><span class="line">Job                <span class="number">1</span>   <span class="number">1</span>   <span class="number">0</span>       <span class="number">1</span>               <span class="number">1</span>                <span class="number">1</span></span><br><span class="line">Housing            <span class="number">1</span>   <span class="number">1</span>   <span class="number">1</span>       <span class="number">0</span>               <span class="number">1</span>                <span class="number">1</span></span><br><span class="line">Saving.accounts    <span class="number">1</span>   <span class="number">1</span>   <span class="number">1</span>       <span class="number">1</span>               <span class="number">0</span>                <span class="number">1</span></span><br><span class="line">Checking.account   <span class="number">1</span>   <span class="number">1</span>   <span class="number">1</span>       <span class="number">1</span>               <span class="number">1</span>                <span class="number">0</span></span><br><span class="line">                 Credit.amount Duration Purpose</span><br><span class="line">Age                          <span class="number">1</span>        <span class="number">1</span>       <span class="number">1</span></span><br><span class="line">Sex                          <span class="number">1</span>        <span class="number">1</span>       <span class="number">1</span></span><br><span class="line">Job                          <span class="number">1</span>        <span class="number">1</span>       <span class="number">1</span></span><br><span class="line">Housing                      <span class="number">1</span>        <span class="number">1</span>       <span class="number">1</span></span><br><span class="line">Saving.accounts              <span class="number">1</span>        <span class="number">1</span>       <span class="number">1</span></span><br><span class="line">Checking.account             <span class="number">1</span>        <span class="number">1</span>       <span class="number">1</span></span><br></pre></td></tr></table></figure><p>从输出结果的Imputation methods部分看到，只对含有缺失值的Saving.accounts和Checking.account特征使用"cart"方法进行插补。</p><p>获取插补后的数据，并对数据进行整理。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">credit.df.full &lt;- complete(imp)  <span class="comment"># 获取插补后的数据</span></span><br><span class="line">credit.df.full$Risk &lt;- credit.df$Risk  <span class="comment"># 添加插补前被剔除的Risk列</span></span><br><span class="line"><span class="comment"># 将Risk特征放在第一列</span></span><br><span class="line">credit.df.full &lt;- credit.df.full[, c(<span class="string">"Risk"</span>, colnames(credit.df.full[, -<span class="number">10</span>]))]</span><br></pre></td></tr></table></figure><p>查看插补后的数据是否还有缺失值。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sum(is.na(credit.df.full))</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>] <span class="number">0</span></span><br></pre></td></tr></table></figure><p>结果表明数据中已经没有缺失值了。</p><h2 id="描述性分析">描述性分析</h2><h3 id="特征分析">特征分析</h3><h4 id="risk">Risk</h4><p>Risk表示信用好坏。因子类型，因子水平：1表示良好，0表示差。</p><p>显示Risk的水平频数条形图</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visualize.barchart(credit.df.full$Risk)</span><br></pre></td></tr></table></figure> <img src="/信用风险分析/信用风险分析/risk_desc.jpg" title="Risk条形图"><p>从上图中可以看到，该数据集中信用良好的客户占比为70%，信用差的客户占比为30%。</p><h4 id="age">Age</h4><p>Age表示年龄，数值类型。</p><p>查看Age描述性统计</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">summary(credit.df.full$Age)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span><br><span class="line"><span class="number">19.00</span>   <span class="number">27.00</span>   <span class="number">33.00</span>   <span class="number">35.55</span>   <span class="number">42.00</span>   <span class="number">75.00</span></span><br></pre></td></tr></table></figure><p>贷款客户的最小年龄为19，最大年龄为75，年龄均值为35.55，年龄中位数为33。</p><p>显示Age的直方图和密度图</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visualize.distribution(credit.df.full$Age)</span><br></pre></td></tr></table></figure> <img src="/信用风险分析/信用风险分析/age_desc.jpg" title="Age分布"><p>可以看到，Age的密度分布是一个右偏态分布，多数客户的年龄集中在20～50的年龄段中。</p><p>当Risk为0时，Age的描述性统计</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">summary(credit.df.full[which(credit.df.full$Risk == <span class="number">0</span>), <span class="string">"Age"</span>])</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span><br><span class="line"><span class="number">19.00</span>   <span class="number">25.00</span>   <span class="number">31.00</span>   <span class="number">33.96</span>   <span class="number">40.00</span>   <span class="number">74.00</span></span><br></pre></td></tr></table></figure><p>当Risk为1时，Age的描述性统计</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">summary(credit.df.full[which(credit.df.full$Risk == <span class="number">1</span>), <span class="string">"Age"</span>])</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span><br><span class="line"><span class="number">19.00</span>   <span class="number">27.00</span>   <span class="number">34.00</span>   <span class="number">36.22</span>   <span class="number">42.25</span>   <span class="number">75.00</span></span><br></pre></td></tr></table></figure><p>显示在Risk分别为0和1时，Age的直方图和密度图</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visualize.distribution.xy(credit.df.full$Age, credit.df.full$Risk)</span><br></pre></td></tr></table></figure> <img src="/信用风险分析/信用风险分析/age_risk.jpg" title="Age&Risk密度图"><p>可以看到，在20～30年龄段的客户中，信用差的客户数量密度要高于信用好的客户数量密度；在大于30年龄段的客户中，信用好的客户数量密度普遍要高于信用差的客户数量密度。这说明，该数据集中20～30年龄段的客户信用违约风险更高。</p><p>显示Age、Age与Risk不同水平间的箱线图</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visualize.boxplot(credit.df.full$Age, credit.df.full$Risk)</span><br></pre></td></tr></table></figure> <img src="/信用风险分析/信用风险分析/age_boxplot.jpg" title="Age&Risk箱线图"><p>可以看到，信用差的客户的年龄的中位数要小于信用好的客户的年龄的中位数。</p><p>对Age与Risk进行双样本t检验，检验Risk与Age是否有显著差异。首先需要进行方差齐性检验，然后在进行双样本t检验。</p><p>方差齐性检验</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var.test(credit.df.full$Age ~ credit.df.full$Risk)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	<span class="literal">F</span> test to compare two variances</span><br><span class="line">data:  credit.df.full$Age by credit.df.full$Risk</span><br><span class="line"><span class="literal">F</span> = <span class="number">0.97229</span>, num df = <span class="number">299</span>, denom df = <span class="number">699</span>, p-value = <span class="number">0.7843</span></span><br><span class="line">alternative hypothesis: true ratio of variances is not equal to <span class="number">1</span></span><br><span class="line"><span class="number">95</span> percent confidence interval:</span><br><span class="line"> <span class="number">0.8055823</span> <span class="number">1.1823076</span></span><br><span class="line">sample estimates:</span><br><span class="line">ratio of variances </span><br><span class="line">         <span class="number">0.9722949</span></span><br></pre></td></tr></table></figure><p>检验的p值0.7843大于显著性水平0.05，所以接受原假设。这说明，在显著性水平0.05的条件下，信用好的客户年龄样本与信用差的客户年龄样本的方差是相同的。</p><p>双样本t检验</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># var.equal = TRUE表示方差齐性为真</span></span><br><span class="line">t.test(credit.df.full$Age ~ credit.df.full$Risk, var.equal = <span class="literal">TRUE</span>)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	Two Sample t-test</span><br><span class="line">data:  credit.df.full$Age by credit.df.full$Risk</span><br><span class="line">t = -<span class="number">2.8908</span>, df = <span class="number">998</span>, p-value = <span class="number">0.003925</span></span><br><span class="line">alternative hypothesis: true difference <span class="keyword">in</span> means is not equal to <span class="number">0</span></span><br><span class="line"><span class="number">95</span> percent confidence interval:</span><br><span class="line"> -<span class="number">3.7957159</span> -<span class="number">0.7261889</span></span><br><span class="line">sample estimates:</span><br><span class="line">mean <span class="keyword">in</span> group <span class="number">0</span> mean <span class="keyword">in</span> group <span class="number">1</span> </span><br><span class="line">       <span class="number">33.96333</span>        <span class="number">36.22429</span></span><br></pre></td></tr></table></figure><p>检验的p值0.003925小于显著性水平0.05，所以拒绝原假设。这说明，在显著性水平0.05的条件下，信用好的客户年龄样本与信用差的客户年龄样本存在显著性差异。</p><h4 id="sex">Sex</h4><p>Sex表是性别，因子类型，因子水平：female，male。</p><p>显示Sex水平频数条形图，以及Risk在Sex不同水平下的相应频数。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visualize.barchart(credit.df.full$Sex, credit.df.full$Risk)</span><br></pre></td></tr></table></figure> <img src="/信用风险分析/信用风险分析/sex_desc.jpg" title="Sex水平频数条形图"><p>数据集中男性所占百分比为69%，女性所占百分比为31%。</p> <img src="/信用风险分析/信用风险分析/sex_risk.jpg" title="Sex&Risk条形图"><p>在男性客户中，信用良好的客户数量要远远高于信用差的客户数量；在女性客户中，信用良好的客户数量也高于信用差的客户数量。</p><p>对Sex和Risk的建立列联表，并使用卡方检验进行独立性检验。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get.contingency.table(credit.df.full$Risk, credit.df.full$Sex, chisq.test = <span class="literal">TRUE</span>)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">   Cell Contents</span><br><span class="line">|-------------------------|</span><br><span class="line">|                       N |</span><br><span class="line">|           N / Col Total |</span><br><span class="line">|-------------------------|</span><br><span class="line">Total Observations <span class="keyword">in</span> Table:  <span class="number">1000</span> </span><br><span class="line">             | x.feature </span><br><span class="line">   y.feature |    female |      male | Row Total | </span><br><span class="line">-------------|-----------|-----------|-----------|</span><br><span class="line">           <span class="number">0</span> |       <span class="number">109</span> |       <span class="number">191</span> |       <span class="number">300</span> | </span><br><span class="line">             |     <span class="number">0.352</span> |     <span class="number">0.277</span> |           | </span><br><span class="line">-------------|-----------|-----------|-----------|</span><br><span class="line">           <span class="number">1</span> |       <span class="number">201</span> |       <span class="number">499</span> |       <span class="number">700</span> | </span><br><span class="line">             |     <span class="number">0.648</span> |     <span class="number">0.723</span> |           | </span><br><span class="line">-------------|-----------|-----------|-----------|</span><br><span class="line">Column Total |       <span class="number">310</span> |       <span class="number">690</span> |      <span class="number">1000</span> | </span><br><span class="line">             |     <span class="number">0.310</span> |     <span class="number">0.690</span> |           | </span><br><span class="line">-------------|-----------|-----------|-----------|</span><br><span class="line">Statistics <span class="keyword">for</span> All Table Factors</span><br><span class="line">Pearson<span class="string">'s Chi-squared test </span></span><br><span class="line"><span class="string">------------------------------------------------------------</span></span><br><span class="line"><span class="string">Chi^2 =  5.699147     d.f. =  1     p =  0.01697316 </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Pearson'</span>s Chi-squared test with Yates<span class="string">' continuity correction </span></span><br><span class="line"><span class="string">------------------------------------------------------------</span></span><br><span class="line"><span class="string">Chi^2 =  5.348516     d.f. =  1     p =  0.02073991</span></span><br></pre></td></tr></table></figure><p>因为检验的p值0.01697316小于显著性水平0.05，所以拒绝Risk和Sex相互独立的假设。这说明，如果不受其它因素影响，在显著性水平为0.05的情况下，Risk和Sex之间存在一定的关联。</p><h4 id="job">Job</h4><p>Job表示客户当前职业状况。因子类型，因子水平：0表示没有职业技能且不是常住居民的人员（unskilled and non-resident）；1表示没有职业技能但为常住居民的人员 （unskilled and resident）；2表示拥有职业技能工作的人员（skilled）； 3表示拥有高级职业技能工作的人员（highly skilled)。</p><p>显示Job水平频数条形图，以及Risk在Job不同水平下的相应频数。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visualize.barchart(credit.df.full$Job, credit.df.full$Risk)</span><br></pre></td></tr></table></figure> <img src="/信用风险分析/信用风险分析/job_desc.jpg" title="Job水平频数条形图"><p>数据集的所有客户中，没有职业技能且不是常住居民的人员占2.2%，没有职业技能但为常住居民的人员20%，没有职业技能但为常住居民的人员占63%，拥有高级职业技能工作的人员占14.8%。可见后三种客户占数据集的所有客户的97.8%。</p> <img src="/信用风险分析/信用风险分析/job_risk.jpg" title="Job&Risk条形图"><p>上述的每类客户中，信用好的客户数量明显要高于信用差的客户数量。在没有职业技能但为常住居民的人员和没有职业技能但为常住居民的人员这两类的客户中，信用好的客户数量要远高于相应同类人员中信用差的人员数量。</p><p>对Job和Risk的建立列联表，并使用卡方检验进行独立性检验。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get.contingency.table(credit.df.full$Risk, credit.df.full$Job, chisq.test = <span class="literal">TRUE</span>)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"> Cell Contents</span><br><span class="line">|-------------------------|</span><br><span class="line">|                       N |</span><br><span class="line">|           N / Col Total |</span><br><span class="line">|-------------------------|</span><br><span class="line">Total Observations <span class="keyword">in</span> Table:  <span class="number">1000</span> </span><br><span class="line">             | x.feature </span><br><span class="line">   y.feature |         <span class="number">0</span> |         <span class="number">1</span> |         <span class="number">2</span> |         <span class="number">3</span> | Row Total | </span><br><span class="line">-------------|-----------|-----------|-----------|-----------|-----------|</span><br><span class="line">           <span class="number">0</span> |         <span class="number">7</span> |        <span class="number">56</span> |       <span class="number">186</span> |        <span class="number">51</span> |       <span class="number">300</span> | </span><br><span class="line">             |     <span class="number">0.318</span> |     <span class="number">0.280</span> |     <span class="number">0.295</span> |     <span class="number">0.345</span> |           | </span><br><span class="line">-------------|-----------|-----------|-----------|-----------|-----------|</span><br><span class="line">           <span class="number">1</span> |        <span class="number">15</span> |       <span class="number">144</span> |       <span class="number">444</span> |        <span class="number">97</span> |       <span class="number">700</span> | </span><br><span class="line">             |     <span class="number">0.682</span> |     <span class="number">0.720</span> |     <span class="number">0.705</span> |     <span class="number">0.655</span> |           | </span><br><span class="line">-------------|-----------|-----------|-----------|-----------|-----------|</span><br><span class="line">Column Total |        <span class="number">22</span> |       <span class="number">200</span> |       <span class="number">630</span> |       <span class="number">148</span> |      <span class="number">1000</span> | </span><br><span class="line">             |     <span class="number">0.022</span> |     <span class="number">0.200</span> |     <span class="number">0.630</span> |     <span class="number">0.148</span> |           | </span><br><span class="line">-------------|-----------|-----------|-----------|-----------|-----------|</span><br><span class="line">Statistics <span class="keyword">for</span> All Table Factors</span><br><span class="line">Pearson<span class="string">'s Chi-squared test </span></span><br><span class="line"><span class="string">------------------------------------------------------------</span></span><br><span class="line"><span class="string">Chi^2 =  1.885156     d.f. =  3     p =  0.5965816</span></span><br></pre></td></tr></table></figure><p>因为检验的p值0.5965816大于显著性水平0.05，所以接受Risk和Job相互独立的假设。这说明，如果不受其它因素影响，在显著性水平为0.05的情况下，Risk和Job相互独立。</p><h4 id="housing">Housing</h4><p>Housing表示居住房子所有权。因子类型，因子水平：own，rent，free。</p><p>显示Housing水平频数条形图，以及Risk在Housing不同水平下的相应频数。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visualize.barchart(credit.df.full$Housing, credit.df.full$Risk)</span><br></pre></td></tr></table></figure> <img src="/信用风险分析/信用风险分析/housing_desc.jpg" title="Housing水平频数条形图"><p>水平"own"的客户数量占所有客户数量的百分比为71.3%；水平"rent"的客户数量占所有客户数量的百分比为17.9%；水平"free"的客户数量占所有客户数量的百分比为10.8%。</p> <img src="/信用风险分析/信用风险分析/housing_risk.jpg" title="Housing&Risk条形图"><p>在水平为"own"的客户中，信用良好的客户数量要远远高于信用差的客户数量；在水平为"rent"或"free"的客户中，信用良好的客户数量也高于信用差的客户数量，但差距没有水平为"own"的情况明显。</p><p>对Housing和Risk建立列联表，并使用卡方检验进行独立性检验。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get.contingency.table(credit.df.full$Risk, credit.df.full$Housing, chisq.test = <span class="literal">TRUE</span>)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">   Cell Contents</span><br><span class="line">|-------------------------|</span><br><span class="line">|                       N |</span><br><span class="line">|           N / Col Total |</span><br><span class="line">|-------------------------|</span><br><span class="line">Total Observations <span class="keyword">in</span> Table:  <span class="number">1000</span> </span><br><span class="line">             | x.feature </span><br><span class="line">   y.feature |      free |       own |      rent | Row Total | </span><br><span class="line">-------------|-----------|-----------|-----------|-----------|</span><br><span class="line">           <span class="number">0</span> |        <span class="number">44</span> |       <span class="number">186</span> |        <span class="number">70</span> |       <span class="number">300</span> | </span><br><span class="line">             |     <span class="number">0.407</span> |     <span class="number">0.261</span> |     <span class="number">0.391</span> |           | </span><br><span class="line">-------------|-----------|-----------|-----------|-----------|</span><br><span class="line">           <span class="number">1</span> |        <span class="number">64</span> |       <span class="number">527</span> |       <span class="number">109</span> |       <span class="number">700</span> | </span><br><span class="line">             |     <span class="number">0.593</span> |     <span class="number">0.739</span> |     <span class="number">0.609</span> |           | </span><br><span class="line">-------------|-----------|-----------|-----------|-----------|</span><br><span class="line">Column Total |       <span class="number">108</span> |       <span class="number">713</span> |       <span class="number">179</span> |      <span class="number">1000</span> | </span><br><span class="line">             |     <span class="number">0.108</span> |     <span class="number">0.713</span> |     <span class="number">0.179</span> |           | </span><br><span class="line">-------------|-----------|-----------|-----------|-----------|</span><br><span class="line">Statistics <span class="keyword">for</span> All Table Factors</span><br><span class="line">Pearson<span class="string">'s Chi-squared test </span></span><br><span class="line"><span class="string">------------------------------------------------------------</span></span><br><span class="line"><span class="string">Chi^2 =  18.19984     d.f. =  2     p =  0.0001116747</span></span><br></pre></td></tr></table></figure><p>因为检验的p值0.0001116747小于显著性水平0.05，所以拒绝Risk和Housing相互独立的假设。这表明，如果不受其它因素影响，在显著性水平为0.05的情况下，Risk和Housing之间存在一定关联。</p><h4 id="saving.accounts">Saving.accounts</h4><p>Saving.accounts表示储蓄账户存款。因子类型，因子水平：little，moderate，rich，quite rich。</p><p>显示Saving.accounts水平频数条形图，以及Risk在Saving.accounts不同水平下的相应频数。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visualize.barchart(credit.df.full$Saving.accounts, credit.df.full$Risk)</span><br></pre></td></tr></table></figure> <img src="/信用风险分析/信用风险分析/saving_accounts_desc.jpg" title="Saving.accounts水平频数条形图"><p>水平"little"的客户数量占所有客户数量的百分比为73.4%；水平"moderate"的客户数量占所有客户数量的百分比为13.2%；水平"quite rich"的客户数量占所有客户数量的百分比为7.8%；水平"rich"的客户数量占所有客户数量的百分比为5.6%。</p> <img src="/信用风险分析/信用风险分析/saving_accounts_risk.jpg" title="Saving.accounts&Risk条形图"><p>在水平"little"中，信用良好的客户数量占该水平所有客户数量的67.3%；在"moderate"水平中，信用良好的客户数量占该水平所有客户数量的68.3%；在"quite rich"水平中，信用良好的客户数量占该水平所有客户数量的85.9%；在"rich"水平中，信用良好的客户数量占该水平所有客户数量的87.5%。</p><p>对Saving.accounts和Risk建立列联表，并使用卡方检验进行独立性检验。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get.contingency.table(credit.df.full$Risk, credit.df.full$Saving.accounts, chisq.test = <span class="literal">TRUE</span>)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">  Cell Contents</span><br><span class="line">|-------------------------|</span><br><span class="line">|                       N |</span><br><span class="line">|           N / Col Total |</span><br><span class="line">|-------------------------|</span><br><span class="line">Total Observations <span class="keyword">in</span> Table:  <span class="number">1000</span> </span><br><span class="line">             | x.feature </span><br><span class="line">   y.feature |     little |   moderate | quite rich |       rich |  Row Total | </span><br><span class="line">-------------|------------|------------|------------|------------|------------|</span><br><span class="line">           <span class="number">0</span> |        <span class="number">241</span> |         <span class="number">38</span> |         <span class="number">13</span> |          <span class="number">8</span> |        <span class="number">300</span> | </span><br><span class="line">             |      <span class="number">0.328</span> |      <span class="number">0.292</span> |      <span class="number">0.171</span> |      <span class="number">0.136</span> |            | </span><br><span class="line">-------------|------------|------------|------------|------------|------------|</span><br><span class="line">           <span class="number">1</span> |        <span class="number">494</span> |         <span class="number">92</span> |         <span class="number">63</span> |         <span class="number">51</span> |        <span class="number">700</span> | </span><br><span class="line">             |      <span class="number">0.672</span> |      <span class="number">0.708</span> |      <span class="number">0.829</span> |      <span class="number">0.864</span> |            | </span><br><span class="line">-------------|------------|------------|------------|------------|------------|</span><br><span class="line">Column Total |        <span class="number">735</span> |        <span class="number">130</span> |         <span class="number">76</span> |         <span class="number">59</span> |       <span class="number">1000</span> | </span><br><span class="line">             |      <span class="number">0.735</span> |      <span class="number">0.130</span> |      <span class="number">0.076</span> |      <span class="number">0.059</span> |            | </span><br><span class="line">-------------|------------|------------|------------|------------|------------|</span><br><span class="line">Statistics <span class="keyword">for</span> All Table Factors</span><br><span class="line">Pearson<span class="string">'s Chi-squared test </span></span><br><span class="line"><span class="string">------------------------------------------------------------</span></span><br><span class="line"><span class="string">Chi^2 =  16.37091     d.f. =  3     p =  0.0009517389</span></span><br></pre></td></tr></table></figure><p>因为检验的p值0.0009517389小于显著性水平0.05，所以拒绝Risk和Saving.accounts相互独立的假设。这表明，如果不受其它因素影响，在显著性水平为0.05的情况下，Risk和Saving.accounts之间存在一定关联。</p><h4 id="checking.account">Checking.account</h4><p>Checking.account表示支票账户。因子类型，因子水平：little，moderate，rich。</p><p>查看Checking.accounts水平频数条形图，以及Risk在Checking.account不同水平下的相应频数。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visualize.barchart(credit.df.full$Checking.account, credit.df.full$Risk)</span><br></pre></td></tr></table></figure> <img src="/信用风险分析/信用风险分析/checking_account_desc.jpg" title="Checking.account水平频数条形图"><p>水平"little"的客户数量占所有客户数量的百分比为42.2%；水平"moderate"的客户数量占所有客户数量的百分比为46.3%；水平"rich"的客户数量占所有客户数量的百分比为11.5%。</p> <img src="/信用风险分析/信用风险分析/checking_account_risk.jpg" title="Checking.account&Risk条形图"><p>在水平"little"中，信用良好的客户数量占该水平所有客户数量的64.7%；在"moderate"水平中，信用良好的客户数量占该水平所有客户数量的71.9%；在"rich"水平中，信用良好的客户数量占该水平所有客户数量的81.7%。</p><p>对Checking.account和Risk的列联表，并使用卡方检验进行独立性检验。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get.contingency.table(credit.df.full$Risk, credit.df.full$Checking.account, chisq.test = <span class="literal">TRUE</span>)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">   Cell Contents</span><br><span class="line">|-------------------------|</span><br><span class="line">|                       N |</span><br><span class="line">|           N / Col Total |</span><br><span class="line">|-------------------------|</span><br><span class="line">Total Observations <span class="keyword">in</span> Table:  <span class="number">1000</span>  </span><br><span class="line">             | x.feature </span><br><span class="line">   y.feature |    little |  moderate |      rich | Row Total | </span><br><span class="line">-------------|-----------|-----------|-----------|-----------|</span><br><span class="line">           <span class="number">0</span> |       <span class="number">149</span> |       <span class="number">130</span> |        <span class="number">21</span> |       <span class="number">300</span> | </span><br><span class="line">             |     <span class="number">0.353</span> |     <span class="number">0.281</span> |     <span class="number">0.183</span> |           | </span><br><span class="line">-------------|-----------|-----------|-----------|-----------|</span><br><span class="line">           <span class="number">1</span> |       <span class="number">273</span> |       <span class="number">333</span> |        <span class="number">94</span> |       <span class="number">700</span> | </span><br><span class="line">             |     <span class="number">0.647</span> |     <span class="number">0.719</span> |     <span class="number">0.817</span> |           | </span><br><span class="line">-------------|-----------|-----------|-----------|-----------|</span><br><span class="line">Column Total |       <span class="number">422</span> |       <span class="number">463</span> |       <span class="number">115</span> |      <span class="number">1000</span> | </span><br><span class="line">             |     <span class="number">0.422</span> |     <span class="number">0.463</span> |     <span class="number">0.115</span> |           | </span><br><span class="line">-------------|-----------|-----------|-----------|-----------|</span><br><span class="line">Statistics <span class="keyword">for</span> All Table Factors</span><br><span class="line">Pearson<span class="string">'s Chi-squared test </span></span><br><span class="line"><span class="string">------------------------------------------------------------</span></span><br><span class="line"><span class="string">Chi^2 =  14.02318     d.f. =  2     p =  0.0009013754</span></span><br></pre></td></tr></table></figure><p>因为检验的p值0.0009013754小于显著性水平0.05，所以拒绝Risk和Checking.account相互独立的假设。这表明，如果不受其它因素影响，在显著性水平为0.05的情况下，Risk和Checking.account之间存在一定关联。</p><h4 id="credit.amount">Credit.amount</h4><p>Credit.amount表示贷款金额。数值类型，单位德国马克。</p><p>查看Credit.amount的描述性统计</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">summary(credit.df.full$Credit.amount)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span><br><span class="line"><span class="number">250</span>    <span class="number">1366</span>    <span class="number">2320</span>    <span class="number">3271</span>    <span class="number">3972</span>   <span class="number">18424</span></span><br></pre></td></tr></table></figure><p>该数据集中，最小的贷款金额为250马克，最大的贷款金额为18424马克，贷款金额均值为3271，贷款金额中位数为2320。</p><p>显示Credit.amount的直方图和密度图</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visualize.distribution(credit.df.full$Credit.amount)</span><br></pre></td></tr></table></figure> <img src="/信用风险分析/信用风险分析/credit_amount_desc.jpg" title="Credit.amount分布图"><p>可以看到，Credit.amount的密度分布是一个右偏态分布，多数客户的贷款金额集中在250～10000之间。</p><p>当Risk为0时，Credit.amount的描述性统计</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">summary(credit.df.full[which(credit.df.full$Risk == <span class="number">0</span>), <span class="string">"Credit.amount"</span>])</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span><br><span class="line"><span class="number">433</span>    <span class="number">1352</span>    <span class="number">2574</span>    <span class="number">3938</span>    <span class="number">5142</span>   <span class="number">18424</span></span><br></pre></td></tr></table></figure><p>当Risk为1时，Credit.amount的描述性统计</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">summary(credit.df.full[which(credit.df.full$Risk == <span class="number">1</span>), <span class="string">"Credit.amount"</span>])</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span><br><span class="line"><span class="number">250</span>    <span class="number">1376</span>    <span class="number">2244</span>    <span class="number">2985</span>    <span class="number">3635</span>   <span class="number">15857</span></span><br></pre></td></tr></table></figure><p>显示在Risk分别为0和1时，Credit.amount的直方图和密度图</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visualize.distribution.xy(credit.df.full$Credit.amount, credit.df.full$Risk)</span><br></pre></td></tr></table></figure> <img src="/信用风险分析/信用风险分析/credit_amount_risk.jpg" title="Credit.amount&Risk密度图"><p>可以看到，信用好的客户主要集中在贷款金额250～5000马克的范围内，而且该范围内的信用好的客户数量密度要高于信用差的客户数量密度；在贷款金额大于5000马克年龄段的客户中，信用差的客户数量密度要高于信用好的客户数量密度。</p><p>显示Credit.amount、Credit.amount与Risk不同水平间的箱线图</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visualize.boxplot(credit.df.full$Credit.amount, credit.df.full$Risk)</span><br></pre></td></tr></table></figure> <img src="/信用风险分析/信用风险分析/credit_amount_boxplot.jpg" title="Credit.amount箱线图"><p>数据分布的右偏性在箱线图中体现为大量的圆点，而信用差的客户贷款金额的中位数要比信用好的客户的贷款金额的中位数要高。</p><p>对Credit.amount与Risk进行双样本t检验，检验Risk与Credit.amount是否有显著差异。首先需要进行方差齐性检验，然后在进行双样本t检验。</p><p>方差齐性检验</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var.test(credit.df.full$Credit.amount ~ credit.df.full$Risk)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	<span class="literal">F</span> test to compare two variances</span><br><span class="line">data:  credit.df.full$Credit.amount by credit.df.full$Risk</span><br><span class="line"><span class="literal">F</span> = <span class="number">2.1678</span>, num df = <span class="number">299</span>, denom df = <span class="number">699</span>, p-value &lt; <span class="number">2.2e-16</span></span><br><span class="line">alternative hypothesis: true ratio of variances is not equal to <span class="number">1</span></span><br><span class="line"><span class="number">95</span> percent confidence interval:</span><br><span class="line"> <span class="number">1.796126</span> <span class="number">2.636073</span></span><br><span class="line">sample estimates:</span><br><span class="line">ratio of variances </span><br><span class="line">          <span class="number">2.167828</span></span><br></pre></td></tr></table></figure><p>检验的p值2.2e-16小于显著性水平0.05，所以拒绝原假设。这说明，在显著性水平0.05的条件下，信用好的客户贷款金额样本与信用差的客户贷款金额样本的方差是不同的。</p><p>双样本t检验</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># var.equal = FALSE表示方差齐性为假</span></span><br><span class="line">t.test(credit.df.full$Credit.amount ~ credit.df.full$Risk, var.equal = <span class="literal">FALSE</span>)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	Welch Two Sample t-test</span><br><span class="line">data:  credit.df.full$Credit.amount by credit.df.full$Risk</span><br><span class="line">t = <span class="number">4.2642</span>, df = <span class="number">421.86</span>, p-value = <span class="number">2.478e-05</span></span><br><span class="line">alternative hypothesis: true difference <span class="keyword">in</span> means is not equal to <span class="number">0</span></span><br><span class="line"><span class="number">95</span> percent confidence interval:</span><br><span class="line">  <span class="number">513.534</span> <span class="number">1391.805</span></span><br><span class="line">sample estimates:</span><br><span class="line">mean <span class="keyword">in</span> group <span class="number">0</span> mean <span class="keyword">in</span> group <span class="number">1</span> </span><br><span class="line">       <span class="number">3938.127</span>        <span class="number">2985.457</span></span><br></pre></td></tr></table></figure><p>检验的p值2.478e-05小于显著性水平0.05，所以拒绝原假设。这说明，在显著性水平0.05的条件下，信用好的客户贷款金额样本与信用差的客户贷款金额样本存在显著性差异。</p><h4 id="duration">Duration</h4><p>Duration表示还款期限或贷款时间。数值类型，单位月。</p><p>查看Duration的描述性统计</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">summary(credit.df.full$Duration)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span><br><span class="line">  <span class="number">4</span>      <span class="number">12</span>      <span class="number">18</span>      <span class="number">21</span>      <span class="number">24</span>      <span class="number">72</span></span><br></pre></td></tr></table></figure><p>显示Duration的直方图和密度图</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visualize.distribution(credit.df.full$Duration)</span><br></pre></td></tr></table></figure> <img src="/信用风险分析/信用风险分析/duration_desc.jpg" title="Duration分布"><p>可以看到，Credit.amount的密度分布是一个多峰分布。</p><p>当Risk为0时，Duration的描述性统计</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">summary(credit.df.full[which(credit.df.full$Risk == <span class="number">0</span>), <span class="string">"Duration"</span>])</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span><br><span class="line"><span class="number">6.00</span>   <span class="number">12.00</span>   <span class="number">24.00</span>   <span class="number">24.86</span>   <span class="number">36.00</span>   <span class="number">72.00</span></span><br></pre></td></tr></table></figure><p>当Risk为1时，Duration的描述性统计</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">summary(credit.df.full[which(credit.df.full$Risk == <span class="number">1</span>), <span class="string">"Duration"</span>])</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span><br><span class="line"><span class="number">4.00</span>   <span class="number">12.00</span>   <span class="number">18.00</span>   <span class="number">19.21</span>   <span class="number">24.00</span>   <span class="number">60.00</span></span><br></pre></td></tr></table></figure><p>显示在Risk分别为0和1时，Duration的直方图和密度图</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visualize.distribution.xy(credit.df.full$Duration, credit.df.full$Risk)</span><br></pre></td></tr></table></figure> <img src="/信用风险分析/信用风险分析/duration_risk.jpg" title="Duration&Risk密度图"><p>在贷款时间为4～30个月范围内的信用好的客户数量密度要高于信用差的客户数量密度；在贷款时间大于30个月范围内的客户中，信用差的客户数量密度要高于信用好的客户数量密度。</p><p>显示Duration、Duration与Risk不同水平间的箱线图</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visualize.boxplot(credit.df.full$Duration, credit.df.full$Risk)</span><br></pre></td></tr></table></figure> <img src="/信用风险分析/信用风险分析/duration_boxplot.jpg" title="Duration箱线图"><p>信用差的客户贷款时间的中位数要比信用好的客户的贷款时间的中位数要高。</p><p>对Duration与Risk进行双样本t检验，检验Risk与Duration是否有显著差异。首先需要进行方差齐性检验，然后在进行双样本t检验。</p><p>方差齐性检验</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var.test(credit.df.full$Duration ~ credit.df.full$Risk)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	<span class="literal">F</span> test to compare two variances</span><br><span class="line">data:  credit.df.full$Duration by credit.df.full$Risk</span><br><span class="line"><span class="literal">F</span> = <span class="number">1.4372</span>, num df = <span class="number">299</span>, denom df = <span class="number">699</span>, p-value = <span class="number">0.0001416</span></span><br><span class="line">alternative hypothesis: true ratio of variances is not equal to <span class="number">1</span></span><br><span class="line"><span class="number">95</span> percent confidence interval:</span><br><span class="line"> <span class="number">1.190790</span> <span class="number">1.747656</span></span><br><span class="line">sample estimates:</span><br><span class="line">ratio of variances </span><br><span class="line">           <span class="number">1.43722</span></span><br></pre></td></tr></table></figure><p>检验的p值0.0001416小于显著性水平0.05，所以拒绝原假设。这说明，在显著性水平0.05的条件下，信用好的客户贷款期限样本与信用差的客户贷款期限样本的方差是不同的。</p><p>双样本t检验</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># var.equal = FALSE表示方差齐性为假</span></span><br><span class="line">t.test(credit.df.full$Duration ~ credit.df.full$Risk, var.equal = <span class="literal">FALSE</span>)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">	Welch Two Sample t-test</span><br><span class="line">data:  credit.df.full$Duration by credit.df.full$Risk</span><br><span class="line">t = <span class="number">6.4696</span>, df = <span class="number">485.44</span>, p-value = <span class="number">2.404e-10</span></span><br><span class="line">alternative hypothesis: true difference <span class="keyword">in</span> means is not equal to <span class="number">0</span></span><br><span class="line"><span class="number">95</span> percent confidence interval:</span><br><span class="line"> <span class="number">3.936033</span> <span class="number">7.369682</span></span><br><span class="line">sample estimates:</span><br><span class="line">mean <span class="keyword">in</span> group <span class="number">0</span> mean <span class="keyword">in</span> group <span class="number">1</span> </span><br><span class="line">       <span class="number">24.86000</span>        <span class="number">19.20714</span></span><br></pre></td></tr></table></figure><p>检验的p值2.404e-10小于显著性水平0.05，所以拒绝原假设。这说明，在显著性水平0.05的条件下，信用好的客户贷款期限样本与信用差的客户贷款期限样本存在显著性差异。</p><h4 id="purpose">Purpose</h4><p>Purpose表示贷款目的。因子类型，因子水平：car，furniture/equipment，radio/TV，domestic appliances, repairs，education，business，vacation/others。</p><p>显示Purpose水平频数条形图，以及Risk在Purpose不同水平下的相应频数。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visualize.barchart(credit.df.full$Purpose, credit.df.full$Risk)</span><br></pre></td></tr></table></figure> <img src="/信用风险分析/信用风险分析/purpose_desc.jpg" title="Purpose水平频数条形图"><table><thead><tr class="header"><th>水平</th><th>客户数量占所有客户数量的百分比（%）</th></tr></thead><tbody><tr class="odd"><td>business</td><td>9.7</td></tr><tr class="even"><td>car</td><td>33.7</td></tr><tr class="odd"><td>domestic appliances</td><td>1.2</td></tr><tr class="even"><td>education</td><td>5.9</td></tr><tr class="odd"><td>furniture/equipment</td><td>18.2</td></tr><tr class="even"><td>radio/TV</td><td>28</td></tr><tr class="odd"><td>repairs</td><td>2.2</td></tr><tr class="even"><td>vacation/others</td><td>1.2</td></tr></tbody></table> <img src="/信用风险分析/信用风险分析/purpose_risk.jpg" title="Purpose&Risk条形图"><table><thead><tr class="header"><th>水平</th><th>信用良好的客户数量占所有客户数量百分比（%）</th></tr></thead><tbody><tr class="odd"><td>business</td><td>64.9</td></tr><tr class="even"><td>car</td><td>68.5</td></tr><tr class="odd"><td>domestic appliances</td><td>66.7</td></tr><tr class="even"><td>education</td><td>61</td></tr><tr class="odd"><td>furniture/equipment</td><td>68</td></tr><tr class="even"><td>radio/TV</td><td>77.9</td></tr><tr class="odd"><td>repairs</td><td>63.6</td></tr><tr class="even"><td>vacation/others</td><td>58.3</td></tr></tbody></table><p>对Purpose和Risk建立列联表，并使用卡方检验进行独立性检验。</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get.contingency.table(credit.df.full$Risk, credit.df.full$Purpose, chisq.test = <span class="literal">TRUE</span>)</span><br></pre></td></tr></table></figure><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">   Cell Contents</span><br><span class="line">|-------------------------|</span><br><span class="line">|                       N |</span><br><span class="line">|           N / Col Total |</span><br><span class="line">|-------------------------|</span><br><span class="line">Total Observations <span class="keyword">in</span> Table:  <span class="number">1000</span> </span><br><span class="line">             | x.feature </span><br><span class="line">   y.feature |            business |                 car | domestic appliances |           education | furniture/equipment |            radio/TV |             repairs |     vacation/others |           Row Total | </span><br><span class="line">-------------|---------------------|---------------------|---------------------|---------------------|---------------------|---------------------|---------------------|---------------------|---------------------|</span><br><span class="line">           <span class="number">0</span> |                  <span class="number">34</span> |                 <span class="number">106</span> |                   <span class="number">4</span> |                  <span class="number">23</span> |                  <span class="number">58</span> |                  <span class="number">62</span> |                   <span class="number">8</span> |                   <span class="number">5</span> |                 <span class="number">300</span> | </span><br><span class="line">             |               <span class="number">0.351</span> |               <span class="number">0.315</span> |               <span class="number">0.333</span> |               <span class="number">0.390</span> |               <span class="number">0.320</span> |               <span class="number">0.221</span> |               <span class="number">0.364</span> |               <span class="number">0.417</span> |                     | </span><br><span class="line">-------------|---------------------|---------------------|---------------------|---------------------|---------------------|---------------------|---------------------|---------------------|---------------------|</span><br><span class="line">           <span class="number">1</span> |                  <span class="number">63</span> |                 <span class="number">231</span> |                   <span class="number">8</span> |                  <span class="number">36</span> |                 <span class="number">123</span> |                 <span class="number">218</span> |                  <span class="number">14</span> |                   <span class="number">7</span> |                 <span class="number">700</span> | </span><br><span class="line">             |               <span class="number">0.649</span> |               <span class="number">0.685</span> |               <span class="number">0.667</span> |               <span class="number">0.610</span> |               <span class="number">0.680</span> |               <span class="number">0.779</span> |               <span class="number">0.636</span> |               <span class="number">0.583</span> |                     | </span><br><span class="line">-------------|---------------------|---------------------|---------------------|---------------------|---------------------|---------------------|---------------------|---------------------|---------------------|</span><br><span class="line">Column Total |                  <span class="number">97</span> |                 <span class="number">337</span> |                  <span class="number">12</span> |                  <span class="number">59</span> |                 <span class="number">181</span> |                 <span class="number">280</span> |                  <span class="number">22</span> |                  <span class="number">12</span> |                <span class="number">1000</span> | </span><br><span class="line">             |               <span class="number">0.097</span> |               <span class="number">0.337</span> |               <span class="number">0.012</span> |               <span class="number">0.059</span> |               <span class="number">0.181</span> |               <span class="number">0.280</span> |               <span class="number">0.022</span> |               <span class="number">0.012</span> |                     | </span><br><span class="line">-------------|---------------------|---------------------|---------------------|---------------------|---------------------|---------------------|---------------------|---------------------|---------------------|</span><br><span class="line">Statistics <span class="keyword">for</span> All Table Factors</span><br><span class="line">Pearson<span class="string">'s Chi-squared test </span></span><br><span class="line"><span class="string">------------------------------------------------------------</span></span><br><span class="line"><span class="string">Chi^2 =  13.64209     d.f. =  7     p =  0.05792591</span></span><br></pre></td></tr></table></figure><p>因为检验的p值0.05792591大于显著性水平0.05，所以接受Risk和Job相互独立的假设。这说明，如果不受其它因素影响，在显著性水平为0.05的情况下，Risk和Purpose相互独立。</p><h2 id="结论">结论</h2><p>Risk与Age、Sex、Housing、Saving.accounts、Checking.account、Credit.amount、Duration存在一定的关联。</p><p>Risk与Job、Purpose相互独立。</p></div><footer class="post-footer"><div class="post-tags"><a href="/tags/R语言/" rel="tag"><i class="fa fa-tag"></i> R语言</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/信用风险分析/信用风险预测-svm/" rel="next" title="信用风险预测-SVM"><i class="fa fa-chevron-left"></i> 信用风险预测-SVM</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/R语言/参数估计及r实现/" rel="prev" title="参数估计及R实现">参数估计及R实现<i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap"> 站点概览</li></ul><div class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">lwl</p><div class="site-description motion-element" itemprop="description"></div></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">18</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">7</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">24</span> <span class="site-state-item-name">标签</span></a></div></nav></div></div><div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#信用风险分析"><span class="nav-number">1.</span> <span class="nav-text">信用风险分析</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#分析准备"><span class="nav-number">1.1.</span> <span class="nav-text">分析准备</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#获取数据"><span class="nav-number">1.1.1.</span> <span class="nav-text">获取数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据特征含义"><span class="nav-number">1.1.2.</span> <span class="nav-text">数据特征含义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分析工具准备"><span class="nav-number">1.1.3.</span> <span class="nav-text">分析工具准备</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据处理"><span class="nav-number">1.2.</span> <span class="nav-text">数据处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#数据转换"><span class="nav-number">1.2.1.</span> <span class="nav-text">数据转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#缺失值处理"><span class="nav-number">1.2.2.</span> <span class="nav-text">缺失值处理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#识别缺失值"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">识别缺失值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多重插补填补缺失值"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">多重插补填补缺失值</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#描述性分析"><span class="nav-number">1.3.</span> <span class="nav-text">描述性分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#特征分析"><span class="nav-number">1.3.1.</span> <span class="nav-text">特征分析</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#risk"><span class="nav-number">1.3.1.1.</span> <span class="nav-text">Risk</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#age"><span class="nav-number">1.3.1.2.</span> <span class="nav-text">Age</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sex"><span class="nav-number">1.3.1.3.</span> <span class="nav-text">Sex</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#job"><span class="nav-number">1.3.1.4.</span> <span class="nav-text">Job</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#housing"><span class="nav-number">1.3.1.5.</span> <span class="nav-text">Housing</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#saving.accounts"><span class="nav-number">1.3.1.6.</span> <span class="nav-text">Saving.accounts</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#checking.account"><span class="nav-number">1.3.1.7.</span> <span class="nav-text">Checking.account</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#credit.amount"><span class="nav-number">1.3.1.8.</span> <span class="nav-text">Credit.amount</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#duration"><span class="nav-number">1.3.1.9.</span> <span class="nav-text">Duration</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#purpose"><span class="nav-number">1.3.1.10.</span> <span class="nav-text">Purpose</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#结论"><span class="nav-number">1.4.</span> <span class="nav-text">结论</span></a></li></ol></li></ol></div></div></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="copyright">&copy; <span itemprop="copyrightYear">2019</span><span class="with-love" id="animate"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">lwl</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span title="站点总字数">164k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span title="站点阅读时长">2:29</span></div><div class="powered-by"><i class="fa fa-user-md"></i> <span id="busuanzi_container_site_uv">本站访客数:<span id="busuanzi_value_site_uv">&nbsp;</span></span></div><div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动</div> <span class="post-meta-divider">|</span><div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script>"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script src="/lib/jquery/index.js?v=2.1.3"></script><script src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script src="/js/utils.js?v=7.1.0"></script><script src="/js/motion.js?v=7.1.0"></script><script src="/js/affix.js?v=7.1.0"></script><script src="/js/schemes/pisces.js?v=7.1.0"></script><script src="/js/scrollspy.js?v=7.1.0"></script><script src="/js/post-details.js?v=7.1.0"></script><script src="/js/next-boot.js?v=7.1.0"></script><script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script><script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script><script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script></body></html>